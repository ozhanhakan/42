# Compiler settings
CC = cc
CFLAGS = -Wall -Wextra -Werror

# Source directories
SRC_DIR = ..
TEST_DIR = .

# Find all function source files
FUNCTION_FILES = $(wildcard $(SRC_DIR)/ft_*.c)
FUNCTIONS = $(notdir $(basename $(FUNCTION_FILES)))

# Find all test files
TEST_FILES = $(wildcard $(TEST_DIR)/*_test.c)
TEST_TARGETS = $(basename $(notdir $(TEST_FILES)))

# Default target (build all tests)
all: $(TEST_TARGETS)

# Rule to build test executables
%_test: $(SRC_DIR)/%.c $(TEST_DIR)/%_test.c
	@if [ -f $(TEST_DIR)/$*_test.c ]; then \
		$(CC) $(CFLAGS) -o $@ $^; \
		echo "\033[32mâœ“ $@ built successfully\033[0m"; \
	else \
		echo "\033[31mError: Test file $*_test.c not found\033[0m"; \
		false; \
	fi

# Clean all test executables
clean:
	@rm -f $(TEST_TARGETS)
	@echo "\033[33mAll test executables removed\033[0m"

.PHONY: all clean